<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Pablo Gomez" />

<meta name="date" content="2023-06-08" />

<title>Further customization</title>

<script src="site_libs/header-attrs-2.21/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.0/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.0/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Idioma
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://www.spablo-temporal.network/DataViz-workshop/">English</a>
    </li>
    <li>
      <a href="ES/index.html">Español</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Contact
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="mailto:jpgo@ucdavis.edu">
        <span class="fa fa-envelope"></span>
         
        Email
      </a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Further customization</h1>
<h4 class="author">Pablo Gomez</h4>
<h4 class="date">2023-06-08</h4>

</div>


<div id="further-customization" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Further
customization</h1>
<div id="labels" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Labels</h2>
<p>Usually we try to avoid spaces when using names for the column names,
but for our plots this could be not the most straight forward way to
communicate our analysis, we can set specific labels to make our plots
more readable and self explanatory. Let’s improve bar plot figure a bit
more to make it clearer:</p>
<pre class="r"><code>figures$bars &lt;- captures %&gt;% 
  count(year, wt = treated) %&gt;% 
  ggplot() +
  geom_bar(aes(x = year, y = n), stat = &#39;identity&#39;) + # type of barplot
  labs(# We will use the function labs to generate our labels
    title = &#39;Number of treated by year&#39;,
    x = &#39;Year&#39;,
    y = &#39;Number of treated&#39;
  )

figures$bars</code></pre>
<p><img src="DataViz_II_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
</div>
<div id="themes" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Themes</h2>
<p>ggplot includes the function <code>theme()</code> to define most of
the aspects of the figure such as the background color, the grid, axes,
legend, among many others. There is also several predefined themes (all
start with <code>theme_</code> followed by the name of the theme) that
you can use, if don’t want to mess with all the arguments from the
function <code>theme()</code>. For example:</p>
<pre class="r"><code># all the predefined themes start with theme_
figures$timeseries &lt;- tCaptures %&gt;% 
  ggplot() +
  geom_line(aes(x = week, y = n)) +
  labs(title = &#39;Treated by week&#39;, x = &#39;Week&#39;, y = &#39;Number of treated&#39;) +
  theme_minimal() # We will use the theme minimal

figures$timeseries</code></pre>
<p><img src="DataViz_II_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="other-aesthetics" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Other aesthetics</h2>
<div id="shape" class="section level3" number="1.3.1">
<h3><span class="header-section-number">1.3.1</span> Shape</h3>
<p>There are other aesthetics we can define such as color, type of
point, size, among many others. Lets try changing the point shape for
one of the plots we previously did:</p>
<pre class="r"><code>figures$scatter &lt;- captures %&gt;% # the data we are using
  ggplot() + # we set the canvas
  geom_point(aes(
    x = captures, # X axis
    y = treated, # Y axis
    shape = factor(trap_type) # point shape
  )) +
  labs(title = &#39;Captures and treatments by year&#39;, x = &#39;Captures&#39;, y = &#39;Treated&#39;, shape = &#39;Trap type&#39;) +
  theme_classic() # now lets try the theme &#39;classic&#39;

figures$scatter</code></pre>
<p><img src="DataViz_II_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
</div>
<div id="color" class="section level3" number="1.3.2">
<h3><span class="header-section-number">1.3.2</span> Color</h3>
<p>In the next example we will use the trap type to color our
boxplot:</p>
<pre class="r"><code>captures %&gt;% 
  ggplot() + # set the canvas
  geom_boxplot(aes(y = treated, fill = factor(trap_type))) # we add a boxplot layer</code></pre>
<p><img src="DataViz_II_files/figure-html/fill-1.png" width="672" /></p>
<p>We can also use the variable to color other parts of the plot such as
the border:</p>
<pre class="r"><code>captures %&gt;% 
  ggplot() + # set the canvas
  geom_boxplot(aes(y = treated, col = factor(trap_type))) # we add a boxplot layer</code></pre>
<p><img src="DataViz_II_files/figure-html/col-1.png" width="672" /></p>
</div>
<div id="non-aesthetics-customization" class="section level3"
number="1.3.3">
<h3><span class="header-section-number">1.3.3</span> Non aesthetics
customization</h3>
<p>So far we have added variables inside our <code>aes()</code>
function, but we can add some arguments outside the <code>aes()</code>
function that we want them to be applied for all observations. For
example, we can change the outline of the boxplot to be the same for the
two groups, but the fill color different per group:</p>
<pre class="r"><code>captures %&gt;% 
  ggplot() + # set the canvas
  geom_boxplot(
    aes(y = treated, fill = factor(trap_type)), # This is the normal aesthetics we define
    col = &#39;red&#39; # all aesthetics we define here will be applied to all th ebservations
  ) # we add a boxplot layer</code></pre>
<p><img src="DataViz_II_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
</div>
<div id="colors" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Colors</h2>
<p>To define specific colors for our figure, we can use the function
<code>scale_*_manual</code> where the * represents the aesthetic we want
to represent. If we want to use the color for the fill, we would
use:</p>
<pre class="r"><code>figures$box &lt;- captures %&gt;% 
  ggplot() +
  geom_boxplot(aes(y = treated, fill = factor(trap_type))) +
  scale_fill_manual(values = c(&#39;salmon&#39;, &#39;lightgreen&#39;, &#39;skyblue&#39;, &#39;orchid&#39;)) +
  labs(fill = &#39;trap type&#39;) +
  # theme_linedraw() +
  theme(panel.grid = element_line(colour = &#39;grey98&#39;), 
        panel.grid.major.x = element_blank(), 
        panel.grid.minor.x = element_blank(), 
        panel.background = element_rect(fill = &#39;grey94&#39;), 
        axis.text.x = element_blank(), axis.ticks.x = element_blank())

figures$box</code></pre>
<p><img src="DataViz_II_files/figure-html/colors-1.png" width="672" /></p>
<p>R manages colors in three different ways: by name (i.e: ‘red’), by
rgb value using the function <code>rgb()</code>
(i.e. <code>rgb(1, 0, 0)</code>), or using <a
href="https://marketing.istockphoto.com/blog/hex-colors-guide/">hexadecimal
code</a> (i.e. “#F00000”). You can get a full list of the named colors
in R by using the function <code>colors()</code>, but you will only be
able to see the names. Luckly someone made a tool that can help us
exacly the colors that we want: the <em>Colour Picker</em> addin. Addins
are tools that are available in Rstudio to facilitate tasks, lets try
the colour picker (should be already in your addins toolbar).</p>
<p><img src="img/1c_colPicker.gif" /></p>
<p><strong>Exercise: </strong> Pick 4 colors you like and use them to
create a boxplot of the distribution of number of treated by the trap
type.</p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
